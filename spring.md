# Spring 트랜잭션



## Transactional





## Transactional(readOnly = true)



`@Transactional(readOnly = true)` 어노테이션을 사용하는 것과 사용하지 않는 것 사이에는 몇 가지 중요한 차이점이 있습니다. 특히, 데이터를 변경하지 않고 오직 조회만 하는 연산에서 이 어노테이션의 사용 여부가 중요합니다.

#### `@Transactional(readOnly = true)` 사용 시:

1. **성능 최적화**: `readOnly = true` 설정은 해당 트랜잭션이 데이터를 변경하지 않고 오직 읽기만 할 것임을 스프링 프레임워크에 알려줍니다. 이로 인해 스프링 데이터 접근 레이어는 내부적으로 최적화를 수행할 수 있게 됩니다. 예를 들어, 하이버네이트 같은 JPA 구현체는 더티 체킹(dirty checking)이나 스냅샷 관리와 같은 변경 감지 메커니즘을 비활성화하여 성능을 개선할 수 있습니다.
2. **데이터 일관성 유지**: 데이터를 변경하지 않는다는 것을 명시함으로써, 실수로 데이터 변경 로직이 포함되더라도 트랜잭션이 커밋되지 않아 데이터 일관성을 유지할 수 있습니다.

#### `@Transactional(readOnly = true)` 미사용 시:

1. **데이터 변경 가능**: `@Transactional`만 사용하거나 `readOnly` 속성을 명시하지 않으면, 해당 트랜잭션 내에서 데이터 변경이 가능합니다. 이는 데이터베이스에 변경 사항을 커밋할 수 있다는 의미입니다.
2. **성능 저하 가능성**: `readOnly`를 명시적으로 설정하지 않으면, 스프링 데이터 접근 레이어는 변경 감지 등의 메커니즘을 활성화 상태로 유지합니다. 이는 읽기 전용 연산에서 불필요한 리소스 사용으로 이어질 수 있습니다.

#### 결론:

`@Transactional(readOnly = true)`는 데이터를 변경하지 않는 조회 전용 메서드에서 사용하는 것이 좋습니다. 이는 의도치 않은 데이터 변경을 방지하고, 성능을 최적화하는 데 도움이 됩니다. 데이터를 변경하는 연산에는 `@Transactional`을 사용하되 `readOnly` 속성을 false로 설정하거나 명시하지 않습니다.
