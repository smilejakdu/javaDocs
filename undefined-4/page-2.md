# 배치 전송 처리

## 배치 전송 처리

카프카는 프로듀서, 컨슈머 클라이언트들과 서로 통신하며, 이들 사이에서 수많은 메시지를 주고 받습니다.

왜 배치 전송이 단건 전송보다 효율적인지 살펴보겠습니다.

승객 10명이 5분 간격으로 승강장 A에 도착합니다.

그리고 . 이 승객들을 목적지 B 로 이동시켜줄 기차가 있는데, 기차 한 대에는 승객이 최대 10명까지 탈 . 수있습니다.

10명의 승객은 기차를 타고 목적지인 B까지 이동해야 하는데, 여기서 실시간 그룹과 배치 그룹으로 나눠 비교하겠습니다.

기차의 이동 속도는 두 그룹 모두 동일하다고 가정하겠습니다.

여기서 두 그룹의 탑승 방식은 차이가 있는데, 실시간 그룹이 탑승하는 기차는 승객이 A 에 도착하자마자 1명만 태운 . 채목적지인 B 로 출발합니다.\


<figure><img src="../.gitbook/assets/스크린샷 2024-03-23 오후 12.40.32.png" alt=""><figcaption></figcaption></figure>

* 카프카는 메시지 전송 시 좀 . 더성능이 높은 압축 전송을 사용하는것을 권장합니다.
* 카프카에서는 리플리케이션 기능을 제공합니다. 리더수는 고정을 시키고 리플리케이션이 되면 팔로워 수가 증가하게 된다. 리더는 프로듀서, 컨슈머로부터 오는 모든 읽기와 쓰기 요청을 처리한다. 팔로워는 오직 리더로부터 리플리케이션하게 됩니다.

<figure><img src="../.gitbook/assets/스크린샷 2024-03-23 오후 12.40.43.png" alt=""><figcaption></figcaption></figure>

## 주키퍼의 의존성



카프카를 언급하면서 빼놓을 수 없는 부분이 바로 주키퍼입니다.

주키퍼는 여러 대의 서버를 앙상블로 구성하고, 살아 있는 노드 수가 과반수 이상유지된다면,

지속적인 서비스가 가능한 구조입니다.



