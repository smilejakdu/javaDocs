# 값 객체와 Aggregate

#### 값 객체(Value Object):

값 객체는 도메인의 개념을 표현하기 위해 사용되지만, 식별성(identity)을 갖지 않는 객체입니다. 즉, 두 개의 값 객체가 동일한 속성 값을 가진다면, 두 객체는 동일한 것으로 간주됩니다. 값 객체는 불변성(Immutable)을 가지며, 객체의 상태를 변경할 때는 새로운 객체를 생성해야 합니다.

값 객체의 예시로는 돈(Money), 좌표(Point), 날짜 범위(DateRange) 등이 있을 수 있습니다. 이러한 객체들은 자체적인 속성 값으로 완전히 정의되며, 그 자체로 의미를 가집니다.

#### Aggregate:

Aggregate는 도메인 모델을 구성하는 요소 중 하나로, 관련된 객체들을 하나의 그룹으로 묶는 개념입니다. Aggregate 내의 객체들은 일관된 변경을 보장받아야 하며, Aggregate 루트를 통해 접근되어야 합니다. Aggregate 루트는 Aggregate의 진입점 역할을 하며, Aggregate에 속한 모든 객체들을 관리합니다.

Aggregate는 도메인의 복잡성을 관리하기 위해 사용됩니다. 예를 들어, '주문(Order)' Aggregate는 '주문 항목(OrderItem)'과 '배송 주소(DeliveryAddress)'를 포함할 수 있으며, 이들은 모두 주문이라는 하나의 일관된 단위 아래에 있습니다.

Aggregate 설계 시 고려할 점:

1. **크기:** 너무 많은 객체를 포함하는 큰 Aggregate는 피해야 합니다. Aggregate는 가능한 한 작아야 하며, 도메인의 규칙과 일관성을 유지하는 데 필요한 최소한의 요소만 포함해야 합니다.
2. **경계:** Aggregate는 도메인의 경계를 명확히 하는 데 도움이 됩니다. 각 Aggregate는 독립적으로 존재할 수 있어야 하며, 다른 Aggregate와의 관계는 ID 참조를 통해 유지됩니다.
3. **일관성:** Aggregate 내의 모든 변경은 일관성을 유지해야 합니다. 이를 위해 Aggregate 루트를 통한 변경만 허용하며, 외부에서는 Aggregate 루트를 통해서만 Aggregate의 상태를 변경할 수 있습니다.

값 객체와 Aggregate는 DDD에서 중요한 역할을 하는데, 값을 표현하는 것이 목적인 경우 값 객체를, 복잡한 도메인 규칙과 일관성이 요구되는 경우 Aggregate를 사용합니다.

